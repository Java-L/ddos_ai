# 深度学习网络流量异常检测系统 - 攻防环境测试说明

## 🎯 测试目标

本攻防环境用于测试深度学习网络流量异常检测系统的有效性，通过模拟各种网络攻击来验证系统的检测能力。

## 📁 文件说明

### 核心测试文件
- `basic_test.py` - 基础网络攻击测试脚本（推荐使用）
- `simple_attack.py` - 高级攻击模拟器（需要额外依赖）
- `quick_test.bat` - Windows快速启动脚本

### 分析工具
- `analyze_results.py` - 检测结果分析工具
- `测试说明.md` - 本说明文档

## 🚀 快速开始

### 方法1: 使用批处理脚本（推荐）
```bash
# 双击运行或在命令行执行
quick_test.bat
```

### 方法2: 手动执行
```bash
# 1. 确保Django服务器运行
cd ..
python manage.py runserver 127.0.0.1:8000

# 2. 新开终端，运行测试
cd test_environment
python basic_test.py
```

## 🔍 测试内容

### 1. 连接测试
- 验证Django服务器是否正常运行
- 测试基本网络连接

### 2. 正常流量测试
- 发送5个正常HTTP请求
- 模拟正常用户访问行为

### 3. 恶意请求测试
- SQL注入攻击载荷
- XSS跨站脚本攻击
- 路径遍历攻击

### 4. 端口扫描测试
- 扫描目标端口范围
- 识别开放端口

### 5. 流量洪水攻击
- 短时间内发送大量连接
- 模拟DoS攻击行为

## 📊 查看检测结果

### 1. Web管理界面
访问: http://127.0.0.1:8000/trafficlog/
- 用户名: `admin`
- 密码: `admin`

### 2. 检测结果包含
- **源IP地址**: 攻击来源
- **目标IP地址**: 攻击目标
- **端口信息**: 源端口和目标端口
- **协议类型**: TCP/UDP/ICMP
- **攻击类型**: 检测到的攻击分类
- **威胁级别**: 威胁评估结果
- **检测时间**: 攻击发生时间

### 3. 支持的攻击类型检测
- `BENIGN` - 正常流量
- `Bot` - 僵尸网络
- `DosFam` - DoS攻击家族
- `Heartbleed` - 心脏滴血漏洞
- `Infiltration` - 渗透攻击
- `Patator` - 暴力破解
- `PortScan` - 端口扫描
- `WebAttack` - Web攻击

## 🔧 高级功能

### 结果分析
```bash
# 分析最近24小时的检测结果
python analyze_results.py

# 分析最近6小时的结果
python analyze_results.py --hours 6

# 显示分析图表
python analyze_results.py --show
```

### 自定义测试
修改 `basic_test.py` 中的参数：
```python
# 修改目标
target_ip = "192.168.1.100"
target_port = 80

# 修改测试强度
tester.send_http_requests(10)  # 增加请求数量
tester.flood_simulation(20)    # 延长攻击时间
```

## 📈 测试结果示例

### 成功的测试输出
```
============================================================
基础网络测试工具
============================================================
目标: 127.0.0.1:8000
✓ 连接成功

步骤1: 发送正常HTTP请求
请求 #1: 状态码 200
请求 #2: 状态码 200
...

步骤2: 模拟恶意请求
恶意请求 #1: 状态码 200 - 载荷: admin' --...
恶意请求 #2: 状态码 200 - 载荷: <script>alert...
...

步骤3: 模拟端口扫描
端口 8000: 开放
端口 8001: 关闭
...

步骤4: 模拟流量洪水攻击
洪水攻击完成，共发送 226 个连接

测试完成！
```

## ⚠️ 注意事项

### 1. 环境要求
- Python 3.6+
- Django服务器正常运行
- 网络连接正常

### 2. 权限要求
- 某些测试可能需要管理员权限
- 防火墙可能阻止某些连接

### 3. 安全提醒
- 仅在测试环境中使用
- 不要对生产系统执行攻击测试
- 遵守网络安全法律法规

### 4. 故障排除

**Django服务器未运行**
```bash
cd ..
python manage.py runserver 127.0.0.1:8000
```

**端口被占用**
```bash
netstat -an | findstr 8000
```

**Python模块缺失**
```bash
pip install django requests scapy torch numpy pandas
```

## 📞 技术支持

如果遇到问题：
1. 检查Django服务器日志
2. 确认网络连接正常
3. 验证Python环境配置
4. 查看错误信息详情

## 🎉 测试完成后

1. 查看检测结果统计
2. 分析攻击检测准确率
3. 验证威胁级别评估
4. 检查误报和漏报情况

---

**祝测试顺利！** 🚀
